# Объединение конфигурационных файлов

## Проблема

Ранее в проекте существовало два отдельных конфига:
- `php-site/config.php` - для публичной части сайта
- `admin-php/config.php` - для админ-панели

Это приводило к проблемам:
- Дублирование кода и настроек
- Несогласованные пути к директориям контента
- Проекты отображались в админке, но не на сайте из-за разных путей

## Решение

Создан единый конфигурационный файл [`php-site/config.php`](php-site/config.php), который является основным конфигом, так как **`php-site/` - это корень сайта на хостинге**.

### Глобальные константы путей

```php
// Корневая директория сайта (php-site является корнем на хостинге)
define('ROOT_DIR', __DIR__);

// Пути к директориям контента (относительно корня сайта)
define('CONTENT_DIR', ROOT_DIR . '/../src/content');
define('PROJECTS_DIR', CONTENT_DIR . '/projects');
define('NEWS_DIR', CONTENT_DIR . '/news');
define('REPORTS_DIR', CONTENT_DIR . '/reports');
define('PARTNERS_DIR', CONTENT_DIR . '/partners');
```

**Важно:** Все пути построены от `ROOT_DIR` (который указывает на `php-site/`), и контент находится в `../src/content/` относительно корня сайта.

### Общие настройки

В [`php-site/config.php`](php-site/config.php) содержатся:
- Категории проектов (`PROJECT_CATEGORIES`)
- Статусы проектов (`PROJECT_STATUSES`)
- Типы отчётов (`REPORT_TYPES`)
- Регионы России (`REGIONS`)
- Контактная информация
- Социальные сети
- Вспомогательные функции (e(), formatDate(), formatAmount(), createSlug() и др.)
- Подключение классов (MarkdownParser)

## Структура после изменений

### Основной конфиг
- [`php-site/config.php`](php-site/config.php) - **главный** конфигурационный файл (корень сайта на хостинге)

### Конфиг админ-панели

#### [`admin-php/config.php`](admin-php/config.php)
```php
<?php
// Подключает основной конфиг из php-site
require_once __DIR__ . '/../php-site/config.php';

// Здесь можно добавить специфичные для админки настройки
```

## Структура директорий на хостинге

```
/var/www/vremyacheloveka.ru/
├── php-site/              # Корень сайта (публичная директория)
│   ├── config.php         # Основной конфиг
│   ├── index.php
│   ├── projects.php
│   ├── project.php
│   └── includes/
│       ├── layout.php
│       └── MarkdownParser.php
├── admin-php/             # Админ-панель (защищена .htaccess)
│   ├── config.php         # Подключает php-site/config.php
│   ├── index.php
│   ├── dashboard.php
│   ├── list.php
│   ├── edit.php
│   └── delete.php
└── src/
    └── content/           # Директория с контентом
        ├── projects/
        ├── news/
        ├── reports/
        └── partners/
```

## Преимущества

1. **Единственный источник истины** - все настройки в [`php-site/config.php`](php-site/config.php)
2. **Согласованные пути** - и сайт, и админка используют одинаковые пути к контенту
3. **Правильная структура для хостинга** - `php-site/` является корнем, как на сервере
4. **Легкость поддержки** - изменения нужно вносить только в один файл
5. **Меньше дублирования** - общие функции и константы определены один раз
6. **Предотвращение ошибок** - невозможно рассогласование настроек между частями системы

## Проверка корректности

Все директории контента существуют и доступны:
- ✅ `src/content/`
- ✅ `src/content/projects/` (3 проекта)
- ✅ `src/content/news/` (2 новости)
- ✅ `src/content/reports/` (2 отчёта)
- ✅ `src/content/partners/` (2 партнёра)

## Миграция завершена

Все файлы обновлены и используют новую структуру конфигурации с [`php-site/config.php`](php-site/config.php) в качестве основного конфига.