# Объединение конфигурационных файлов

## Проблема

Ранее в проекте существовало два отдельных конфига:
- `config.php` - для публичной части сайта
- `admin/config.php` - для админ-панели

Это приводило к проблемам:
- Дублирование кода и настроек
- Несогласованные пути к директориям контента
- Проекты отображались в админке, но не на сайте из-за разных путей

## Решение

Создан единый конфигурационный файл [`config.php`](../config.php), который является основным конфигом для всего проекта.

### Глобальные константы путей

```php
// Корневая директория сайта
define('ROOT_DIR', __DIR__);

// Пути к директориям контента (теперь в /content)
define('CONTENT_DIR', ROOT_DIR . '/content');
define('PROJECTS_DIR', CONTENT_DIR . '/projects');
define('NEWS_DIR', CONTENT_DIR . '/news');
define('REPORTS_DIR', CONTENT_DIR . '/reports');
define('PARTNERS_DIR', CONTENT_DIR . '/partners');
```

**Важно:** Все пути построены от `ROOT_DIR`, и контент находится в директории `content/` в корне проекта.

### Общие настройки

В [`config.php`](../config.php) содержатся:
- Категории проектов (`PROJECT_CATEGORIES`)
- Статусы проектов (`PROJECT_STATUSES`)
- Типы отчётов (`REPORT_TYPES`)
- Регионы России (`REGIONS`)
- Контактная информация
- Социальные сети
- Вспомогательные функции (e(), formatDate(), formatAmount(), createSlug() и др.)
- Подключение классов (MarkdownParser)

## Структура после изменений

### Основной конфиг
- [`config.php`](../config.php) - **главный** конфигурационный файл в корне проекта

### Конфиг админ-панели

#### [`admin/config.php`](../admin/config.php)
```php
<?php
// Подключает основной конфиг сайта
require_once __DIR__ . '/../config.php';

// Здесь можно добавить специфичные для админки настройки
```

## Структура директорий на хостинге

```
/var/www/vremyacheloveka.ru/
├── admin/                 # Админ-панель (защищена .htaccess)
│   ├── config.php         # Подключает ../config.php
│   ├── index.php
│   ├── dashboard.php
│   ├── list.php
│   ├── edit.php
│   └── delete.php
├── content/               # Директория с контентом
│   ├── projects/
│   ├── news/
│   ├── reports/
│   └── partners/
├── includes/              # PHP классы
│   ├── layout.php
│   └── MarkdownParser.php
├── static/                # Статические файлы
├── config.php             # Основной конфиг
├── index.php              # Главная страница
├── projects.php           # Список проектов
└── project.php            # Отдельный проект
```

## Преимущества

1. **Единственный источник истины** - все настройки в [`config.php`](../config.php)
2. **Согласованные пути** - и сайт, и админка используют одинаковые пути к контенту
3. **Простая структура** - все файлы в корне проекта
4. **Легкость поддержки** - изменения нужно вносить только в один файл
5. **Меньше дублирования** - общие функции и константы определены один раз
6. **Предотвращение ошибок** - невозможно рассогласование настроек между частями системы

## Проверка корректности

Все директории контента существуют и доступны:
- ✅ `content/`
- ✅ `content/projects/` (3 проекта)
- ✅ `content/news/` (2 новости)
- ✅ `content/reports/` (2 отчёта)
- ✅ `content/partners/` (2 партнёра)

## Миграция завершена

Все файлы обновлены и используют новую структуру конфигурации с [`config.php`](../config.php) в качестве основного конфига.